<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>NoDb</title>
        <meta name="viewport" content="width=device-width" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/>

        <!-- App css -->
        <link href="Content/Site.css" rel="stylesheet" />
        <link href="Content/TodoList.css" rel="stylesheet" />

        <script src="Scripts/modernizr-2.6.2.js"></script>
    </head>
    <body>
        <header>
            <div id="userSettings">
                Hello, NoDb
            </div>
            <p>My Todo Lists</p>
        </header>
        <div id="body">
            <div id="main-content">
                <p class="error" data-bind="text: error"></p>
                <button data-bind="click: addTodoList">Add Todo list</button>
                <button data-bind="click: refresh" style="margin-left: 8px">Refresh</button>

                <section id="lists" data-bind="foreach: todoLists, visible: todoLists().length > 0">
                    <article class="todoList">
                        <header>
                            <form>
                                <input data-bind="value: title,
                                                  selected: isEditingListTitle,
                                                  blurOnEnter: true,
                                                  click: $root.clearErrorMessage" />
                            </form>
                        </header>

                        <a href="#" class="deletelist" data-bind="click: $parent.deleteTodoList">X</a>

                        <ul data-bind="foreach: todos">
                            <li>
                                <input type="checkbox" data-bind="checked: isDone" />
                                <input type="text" 
                                       data-bind="value: title,
                                                  disable: isDone,
                                                  blurOnEnter: true,
                                                  click: $root.clearErrorMessage" />
                                <a href="#" data-bind="click: $parent.deleteTodo">X</a>
                                <p class="error" data-bind="visible: errorMessage, text: errorMessage"></p>
                            </li>
                        </ul>

                        <form data-bind="submit: addTodo">
                            <input class="addTodo" type="text" data-bind="value: newTodoTitle, placeholder: 'Type here to add', blurOnEnter: true, event: { blur: addTodo }" />
                        </form>

                        <p class="error" data-bind="visible: errorMessage, text: errorMessage"></p>
                    </article>
                </section>
            </div>
        </div>
        <footer>
            <p>Learn more about <a href="http://www.breezejs.com" target="_blank">Breeze</a></p>
            <p>&copy; 2014 - My Todo Application</p>
        </footer>

        <!-- 3rd party libraries -->
        <script src="Scripts/jquery-1.8.3.min.js"></script>
        <script src="Scripts/knockout-2.2.0.js"></script>       

        <script src="Scripts/q.js"></script>
        <script src="Scripts/breeze.debug.js"></script>
        <script src="Scripts/breeze.savequeuing.js"></script>
        
        <!-- App libraries -->
        <script src="app/todo.bindings.js"></script>
        <script src="app/todo.datacontext.js"></script>
        <script src="app/todo.model.js"></script>
        <script src="app/todo.viewmodel.js"></script>

    </body>
</html>